<html>
  <head>
    <title>Car Control</title>
    <script>
      function sendCommand(command) {
        fetch('/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ command: command }),
        })
          .then(function(response) {
            console.log(response);
            // Handle the success response
          })
          .catch(function(error) {
            console.log(error);
            // Handle the error response
          });
      }
    </script>
  </head>
  <body>
    <h1>Video Streaming Demonstration</h1>
    <img width="500" height="500" src="{{ url_for('video_feed') }}">
    <h1>Car Control</h1>
    <!-- This code work for single click you must modify also the delay on the raspberry code  -->



    <!-- <button type="button" onclick="sendCommand('forward')">Forward</button>
    <br><br>
    <button type="button" onclick="sendCommand('left')">Left</button>
    <button type="button" onclick="sendCommand('stop')">Stop</button>
    <button type="button" onclick="sendCommand('right')">Right</button>
    <br><br>
    <button type="button" onclick="sendCommand('backward')">Backward</button> -->
    <!-- Add event listeners for button press and release -->

    <button type="button" onclick="sendCommand('auto')">Auto</button>
    <button type="button" onclick="sendCommand('manual')">Manual</button>

    
    <button id="btn1" type="button" onmousedown="sendCommand('forward')" onmouseup="sendCommand('stop')">Forward</button>
    <button id="btn2" type="button" onmousedown="sendCommand('left')" onmouseup="sendCommand('stop')">Left</button>
    <button id="btn3" type="button" onmousedown="sendCommand('right')" onmouseup="sendCommand('stop')">Right</button>
    <button id="btn4" type="button" onmousedown="sendCommand('backward')" onmouseup="sendCommand('stop')">Backward</button>
    <button id="btn4" type="button" onclick="sendCommand('stop')">stop</button>

  </body>

  <script>
    document.addEventListener("keydown", function(event) {
   // Up arrow key
        if(event.code === "ArrowUp"){
          sendCommand('forward')
        }else if(event.code === "ArrowLeft"){
          sendCommand("left")
        }else if(event.code === "ArrowRight"){
          sendCommand("right")
        }else if (event.code === "ArrowDown"){
          sendCommand("backward")
        } 
    });

    document.addEventListener("keyup", function(event) {
          sendCommand('stop')
    });
    </script>
</html>
